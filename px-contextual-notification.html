<link defer rel="import" href="../polymer/polymer.html" />
<link defer rel="import" href="css/px-contextual-notification-styles.html" />

<!--
A Contextual Notification provides a way to notify the user of a state change or
actions taken on a specific context. The context can be a component, page, etc.
Contextual Notifications communicate where the notification applies to and catch
the user's attention. A Contextual Notification can be dismissed or persistent
depending on the type of action or state.

### Basic usage

A basic contextual notification takes text as content, a status icon to the left
of the text, and an action icon on the right side of the notification.

    <px-contextual-notification
      type="healthy"
      status-icon="px-utl:confirmed"
      content="Your dashboard has been successfully created."
      action-icon="px-nav:close"
      opened>
    </px-contextual-notification>

It is possible to configure a contextual notification without either a status
icon or an action icon/button:

    <px-contextual-notification
      small
      type="info"
      content="26 Filters 2,479,322 Devices"
      opened>
    </px-contextual-notification>

### Custom content

You can use slots to insert custom content in the contextual notification.
Note that it is not recommended to put anything but text or chips in the "content"
slot, or to put anything but icons or buttons in the "right" slot. Anything in
the "right" slot should be actionable.

    <px-contextual-notification
      type="info"
      opened>
      <div slot="left"></div>
      <div slot="content" class="chips">
        <px-chip content="Name" show-icon not-selectable></px-chip>
        <px-chip content="Location" show-icon not-selectable></px-chip>
        <px-chip content="Date" show-icon not-selectable></px-chip>
      </div>
      <button slot="right">Clear All</button>
    </px-contextual-notification>

### Styling
The following custom properties are available for styling:

Custom property | Description
:----------------|:-------------
`--px-contextual-notification-height` | Height of the contextual notification. Defaults to 80px on a mobile device, and 40px otherwise.

@element px-contextual-notification
@blurb A component providing a way to notify the user of a state change or actions taken on a specific context.
@homepage index.html
@demo index.html
-->

<dom-module id="px-contextual-notification">
  <template>
    <style include="px-contextual-notification-styles"></style>
      <div class="contextual-notification-left">
        <slot name="left">
          <template is="dom-if" if="[[statusIcon]]">
            <px-icon class="contextual-notification-icon" icon="{{statusIcon}}"></px-icon>
          </template>
        </slot>
      </div>
      <div class="contextual-notification-content">
        <slot name="content">
          <div>{{content}}</div>
        </slot>
      </div>
      <div class="contextual-notification-right" on-tap="_handleTap">
        <slot name="right">
          <template is="dom-if" if="[[actionIcon]]">
            <button class="btn btn--bare btn--icon">
              <px-icon class="contextual-notification-icon" icon={{actionIcon}}></px-icon>
            </button>
          </template>
        </slot>
      <div>

  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'px-contextual-notification',
      properties: {
        /**
         * The icon to display on the left side of the contextual notification
         */
        statusIcon: {
          type: String
        },
        /**
         * The content to display in the contextual notification
         */
        content: {
          type: String
        },
        /**
         * The icon or button to display on the right side of the contextual
         * notification
         */
        actionIcon: {
          type: String
        },
        /**
         * The type of contextual notification defines the visual styling. Should
         * be one of important, warning, error, info/information, healthy, or unknown.
         */
        type: {
          type: String,
          value: 'info',
          reflectToAttribute: true
        },
        /**
         * If true, the height of the notification will be reduced to 40px on
         * mobile and 20px otherwise. Set this attribute when configuring a
         * notification with text only (no icons or buttons).
         */
        small: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        /**
         * If true, the contextual notification is visible. Set to false to hide
         * the notification.
         */
        opened: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        }
      },

      _handleTap(e) {
        const pathRoot = e.composedPath()[0];
        if (pathRoot.classList.contains('contextual-notification-right')) return; // if there is nothing in the slot
        this.fire('px-contextual-notification-action-tapped');
      }
    });
  })();
</script>
</dom-module>
