<link defer rel="import" href="../polymer/polymer.html" />
<link defer rel="import" href="css/px-contextual-notification-styles.html">
<link rel="import" href="../iron-a11y-keys/iron-a11y-keys.html"/>

<!--
A Contextual Notification provides a way to notify the user of a state change or
actions taken on a specific context. The context can be a component, page, etc.
Contextual Notifications communicate where the notification applies to and catch
the user's attention. A Contextual Notification can be dismissed or persistent
depending on the type of action or state.

### Basic usage

A basic contextual notification takes text as content, a status icon to the left
of the text, and an action icon on the right side of the notification.

<px-contextual-notification
  type="healthy"
  status-icon="px-utl:confirmed"
  content="Your dashboard has been successfully created."
  action-icon="px-nav:close"
  opened>
</px-contextual-notification>

It is possible to configure a contextual notification without either a status
icon or an action icon/button. Simply set the relevant slot to an empty div:

<px-contextual-notification
  type="info"
  status-icon="px-utl:filter"
  content="26 Filters 2,479,322 Devices"
  opened>
  <div slot="right"></div>
</px-contextual-notification>

### Custom content

You can also use slots to insert custom content in the contextual notification.
Note that it is not recommended to put anything but text or chips in the "content"
slot, or to put anything but icons or buttons in the "right" slot.

<px-contextual-notification
  type="info"
  opened>
  <div slot="left"></div>
  <div slot="content" class="chips">
    <px-chip content="Name" show-icon not-selectable></px-chip>
    <px-chip content="Location" show-icon not-selectable></px-chip>
    <px-chip content="Date" show-icon not-selectable></px-chip>
  </div>
  <button slot="right">Clear All</button>
</px-contextual-notification>

### Styling
The following custom properties are available for styling:

Custom property | Description
----------------|-------------
`--px-contextual-notification-height` | Height of the contextual notification. Defaults to 80px on a mobile device, and 40px otherwise.

@element px-contextual-notification
@blurb A component providing a way to notify the user of a state change or actions taken on a specific context.
@homepage index.html
@demo index.html
-->

<dom-module id="px-contextual-notification">
  <template>
    <style include="px-contextual-notification-styles"></style>
    <iron-a11y-keys target="[[_actionEl]]" keys="enter" on-keys-pressed="_handleTap"></iron-a11y-keys>
      <div class="contextual-notification-left">
        <slot name="left">
          <px-icon class="contextual-notification-icon" icon="{{statusIcon}}"></px-icon>
        </slot>
      </div>
      <div class="contextual-notification-content">
        <slot name="content">
          <div>{{content}}</div>
        </slot>
      </div>
      <div class="contextual-notification-right" on-tap="_handleTap">
        <slot name="right">
          <px-icon class="contextual-notification-icon" icon={{actionIcon}}></px-icon>
        </slot>
      <div>

  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'px-contextual-notification',
      properties: {

        /**
         * The icon to display on the left side of the contextual notification
         */
        statusIcon: {
          type: String,
          value: ''
        },
        /**
         * The content to display in the contextual notification
         */
        content: {
          type: String
        },
        /**
         * The icon or button to display on the right side of the contextual
         * notification
         */
        actionIcon: {
          type: String,
          value: ''
        },
        /**
         * The type of contextual notification defines the visual styling. Should
         * be one of important, warning, error, info/information, healthy, or unknown.
         */
        type: {
          type: String,
          value: 'info',
          reflectToAttribute: true
        },
        small: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },

        opened: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        /**
        * A reference to this HTML element. Used by iron-a11y-keys.
        *
        * @property _el
        */
        _el: {
          type: HTMLElement
        }
      },
      attached: function() {
        this._el = this;
        this._actionEl = Polymer.dom(this.root).querySelector('.contextual-notification-right');
        this._actionEl.setAttribute("tabindex", "0");
      },
      _handleTap() {
        this.fire('px-contextual-notification-action-tapped');
        console.log('tapped');
      }
    });
  })();
</script>
</dom-module>
